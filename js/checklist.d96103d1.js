"use strict";(self["webpackChunkxivtodo"]=self["webpackChunkxivtodo"]||[]).push([[29],{4279:function(e,t,s){s.r(t),s.d(t,{default:function(){return K}});var i=s(641),o=s(33),a=s(3751);const r={class:"row"},l={class:"col-md"},n={class:"text-muted"},h={key:0,class:"input-group mt-3 mb-2"},d=["placeholder"],c={class:"list-group list-group-flush"},m={class:"col-md order-first order-md-last"},u={class:"text-muted"},k={key:0,class:"input-group mt-3 mb-2"},g=["placeholder"],p={class:"list-group list-group-flush"},D={key:1,class:"d-none d-md-block"},y={class:"text-muted float-end"},C={key:0,class:"row"},f={class:"col"},v={class:"text-muted"},$={key:0,class:"input-group mt-3 mb-2"},w=["placeholder"],H={class:"list-group list-group-flush"},b={key:0,class:"list-group-item"};function L(e,t,s,L,T,W){const x=(0,i.g2)("PageHeader"),R=(0,i.g2)("ChecklistItem");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(x,{title:"page.checklist",subtitle:"pageHeader.forCharacter"},{default:(0,i.k6)((()=>[this.$store.getters.hasCharacter?((0,i.uX)(),(0,i.CE)("button",{key:0,type:"button",class:(0,o.C4)(["btn float-end",{"btn-outline-primary":!T.showHidden,"btn-primary":T.showHidden}]),onClick:t[0]||(t[0]=e=>T.showHidden=!T.showHidden)},[t[19]||(t[19]=(0,i.Lk)("i",{class:"fa-regular fa-pen-to-square"},null,-1)),(0,i.eW)(" "+(0,o.v_)(e.$t("shared.customize")),1)],2)):(0,i.Q3)("",!0)])),_:1}),(0,i.Lk)("h2",null,(0,o.v_)(e.$t("checklist.thingsToDo")),1),(0,i.Lk)("div",r,[(0,i.Lk)("div",l,[(0,i.Lk)("h3",null,(0,o.v_)(e.$t("checklist.weeklies")),1),(0,i.Lk)("span",n,(0,o.v_)(e.$t("checklist.untilReset",{time:T.weeklyReset})),1),T.showHidden?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>T.customWeekly=e),type:"text",class:"form-control",placeholder:e.$t("checklist.customWeekly")},null,8,d),[[a.Jo,T.customWeekly]]),(0,i.Lk)("button",{class:(0,o.C4)(["btn btn-outline-primary",{disabled:!T.customWeekly}]),type:"button",id:"button-addon2",onClick:t[2]||(t[2]=(...e)=>W.addCustomWeekly&&W.addCustomWeekly(...e))},(0,o.v_)(e.$t("checklist.addCustomWeekly")),3)])):(0,i.Q3)("",!0),(0,i.Lk)("ul",c,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)([...this.$store.getters.checklistWeeklies],(e=>((0,i.uX)(),(0,i.Wv)(R,{key:e.name,item:e,type:"weekly",showHidden:T.showHidden,draggable:T.showHidden,onDragstart:t=>W.startDrag(t,e),onDragend:t[3]||(t[3]=e=>W.endDrag()),onDragleave:t[4]||(t[4]=e=>W.endDrag()),onDrop:t=>W.onDrop(t,e),onDragover:[t=>W.onDragOver(t,e),t[5]||(t[5]=(0,a.D$)((()=>{}),["prevent"]))],onDragenter:t[6]||(t[6]=(0,a.D$)((()=>{}),["prevent"])),dragHovered:e.name==this.draggedOverName},null,8,["item","showHidden","draggable","onDragstart","onDrop","onDragover","dragHovered"])))),128))]),t[20]||(t[20]=(0,i.Lk)("br",null,null,-1))]),(0,i.Lk)("div",m,[(0,i.Lk)("h3",null,(0,o.v_)(e.$t("checklist.dailies")),1),(0,i.Lk)("span",u,(0,o.v_)(e.$t("checklist.untilReset",{time:T.dailyReset})),1),T.showHidden?((0,i.uX)(),(0,i.CE)("div",k,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>T.customDaily=e),type:"text",class:"form-control",placeholder:e.$t("checklist.customDaily")},null,8,g),[[a.Jo,T.customDaily]]),(0,i.Lk)("button",{class:(0,o.C4)(["btn btn-outline-primary",{disabled:!T.customDaily}]),type:"button",id:"button-addon2",onClick:t[8]||(t[8]=(...e)=>W.addCustomDaily&&W.addCustomDaily(...e))},(0,o.v_)(e.$t("checklist.addCustomDaily")),3)])):(0,i.Q3)("",!0),(0,i.Lk)("ul",p,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)([...this.$store.getters.checklistDailies],(e=>((0,i.uX)(),(0,i.Wv)(R,{key:e.ID,item:e,type:"daily",showHidden:T.showHidden,draggable:T.showHidden,onDragstart:t=>W.startDrag(t,e),onDragend:t[9]||(t[9]=e=>W.endDrag()),onDragleave:t[10]||(t[10]=e=>W.endDrag()),onDrop:t=>W.onDrop(t,e),onDragover:[t=>W.onDragOver(t,e),t[11]||(t[11]=(0,a.D$)((()=>{}),["prevent"]))],onDragenter:t[12]||(t[12]=(0,a.D$)((()=>{}),["prevent"])),dragHovered:e.name==this.draggedOverName},null,8,["item","showHidden","draggable","onDragstart","onDrop","onDragover","dragHovered"])))),128))]),t[23]||(t[23]=(0,i.Lk)("br",null,null,-1)),this.$store.getters.checklistLenHiddens>0?((0,i.uX)(),(0,i.CE)("span",D,[(0,i.Lk)("span",y,[(0,i.eW)((0,o.v_)(e.$tc("checklist.hiddenTasks",this.$store.getters.checklistLenHiddens)),1),t[21]||(t[21]=(0,i.Lk)("br",null,null,-1)),t[22]||(t[22]=(0,i.Lk)("br",null,null,-1))])])):(0,i.Q3)("",!0)])]),T.showHidden||this.$store.getters.checklistAdhocs.length>0?((0,i.uX)(),(0,i.CE)("div",C,[(0,i.Lk)("div",f,[(0,i.Lk)("h3",null,(0,o.v_)(e.$t("checklist.scratchpad")),1),(0,i.Lk)("span",v,(0,o.v_)(e.$t("checklist.scratchpadDesc")),1),T.showHidden?((0,i.uX)(),(0,i.CE)("div",$,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>T.customAdhoc=e),type:"text",class:"form-control",placeholder:e.$t("checklist.customItem")},null,8,w),[[a.Jo,T.customAdhoc]]),(0,i.Lk)("button",{class:(0,o.C4)(["btn btn-outline-primary",{disabled:!T.customAdhoc}]),type:"button",id:"button-addon2",onClick:t[14]||(t[14]=(...e)=>W.addCustomAdhoc&&W.addCustomAdhoc(...e))},(0,o.v_)(e.$t("checklist.addCustomItem")),3)])):(0,i.Q3)("",!0),(0,i.Lk)("ul",H,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)([...this.$store.getters.checklistAdhocs],(e=>((0,i.uX)(),(0,i.Wv)(R,{key:e.ID,item:e,type:"adhoc",showHidden:T.showHidden,draggable:T.showHidden,onDragstart:t=>W.startDrag(t,e),onDragend:t[15]||(t[15]=e=>W.endDrag()),onDragleave:t[16]||(t[16]=e=>W.endDrag()),onDrop:t=>W.onDrop(t,e),onDragover:[t=>W.onDragOver(t,e),t[17]||(t[17]=(0,a.D$)((()=>{}),["prevent"]))],onDragenter:t[18]||(t[18]=(0,a.D$)((()=>{}),["prevent"])),dragHovered:e.name==this.draggedOverName},null,8,["item","showHidden","draggable","onDragstart","onDrop","onDragover","dragHovered"])))),128)),0==this.$store.getters.checklistAdhocs.length?((0,i.uX)(),(0,i.CE)("li",b,(0,o.v_)(e.$t("checklist.scratchpadHelp")),1)):(0,i.Q3)("",!0)]),t[24]||(t[24]=(0,i.Lk)("br",null,null,-1))])])):(0,i.Q3)("",!0)],64)}s(4114);var T=s(4304);const W={key:0},x={key:1,class:"d-flex justify-content-between align-items-center"},R=["title"],X={key:0},I={class:"tt-text"},A={class:"tt-text"},E={class:"tt-text"};function _(e,t,s,a,r,l){return s.showHidden||!r.itemCopy.hidden&&!s.showHidden?((0,i.uX)(),(0,i.CE)("li",{key:0,class:(0,o.C4)(["list-group-item fw-medium",{"drag-hovered":s.dragHovered,"list-group-item-action":this.$store.getters.hasCharacter,"cursor-pointer":this.$store.getters.hasCharacter,"user-select-none":this.$store.getters.hasCharacter}]),onClick:t[3]||(t[3]=(...e)=>l.check&&l.check(...e)),onMouseover:t[4]||(t[4]=e=>r.isHovering=!0),onMouseout:t[5]||(t[5]=e=>r.isHovering=!1)},[r.itemCopy.hidden||s.showHidden?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("span",W,[!s.showHidden&&this.$store.getters.hasCharacter?((0,i.uX)(),(0,i.CE)("i",{key:0,class:(0,o.C4)(["me-2 fa-fw fal",{"fa-check-circle":r.itemCopy.checked||r.isHovering,"fa-circle":!r.itemCopy.checked&&!r.isHovering,"text-success":r.itemCopy.checked}])},null,2)):(0,i.Q3)("",!0),(0,i.Lk)("span",{class:(0,o.C4)({"text-decoration-line-through":r.itemCopy.checked,"text-success":r.itemCopy.checked})},(0,o.v_)(s.item.name),3)])),s.showHidden?((0,i.uX)(),(0,i.CE)("span",x,[(0,i.Lk)("span",{class:(0,o.C4)({"text-muted":r.itemCopy.hidden})},[(0,i.Lk)("i",{class:"fa-fw fas fa-grip-lines cursor-grab d-none d-md-inline",title:e.$t("shared.dragToReorder")},null,8,R),(0,i.eW)(" Â  "+(0,o.v_)(s.item.name),1)],2),s.showHidden?((0,i.uX)(),(0,i.CE)("span",X,[s.item.custom?((0,i.uX)(),(0,i.CE)("a",{key:0,class:"text-danger cursor-pointer tt",onClick:t[0]||(t[0]=(...e)=>l.remove&&l.remove(...e))},[t[6]||(t[6]=(0,i.Lk)("i",{class:"fa-fw fas fa-trash-alt"},null,-1)),(0,i.Lk)("span",I,(0,o.v_)(e.$t("shared.remove")),1)])):r.itemCopy.hidden?((0,i.uX)(),(0,i.CE)("a",{key:1,class:"text-secondary cursor-pointer tt",onClick:t[1]||(t[1]=(...e)=>l.hid&&l.hid(...e))},[t[7]||(t[7]=(0,i.Lk)("i",{class:"fa-fw fas fa-eye-slash"},null,-1)),(0,i.Lk)("span",A,(0,o.v_)(e.$t("shared.show")),1)])):r.itemCopy.hidden?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("a",{key:2,class:"text-success cursor-pointer tt",onClick:t[2]||(t[2]=(...e)=>l.hid&&l.hid(...e))},[t[8]||(t[8]=(0,i.Lk)("i",{class:"fa-fw fas fa-eye"},null,-1)),(0,i.Lk)("span",E,(0,o.v_)(e.$t("shared.hide")),1)]))])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)],34)):(0,i.Q3)("",!0)}var Q=s(6595),N={data(){return{itemCopy:this.item,isHovering:!1}},props:{item:Object,type:String,showHidden:Boolean,dragHovered:Boolean},watch:{item(){this.itemCopy=this.item}},methods:{hid(){this.itemCopy.hidden=!this.itemCopy.hidden,this.updateItem(!1)},check(){this.$store.getters.hasCharacter&&(this.showHidden||(this.itemCopy.checked=!this.itemCopy.checked,this.updateItem(!1)))},remove(){this.updateItem(!0)},updateItem(e){if("weekly"==this.type){let t=this.$store.getters.checklistWeeklies;for(let s=0;s<t.length;s++)t[s].name==this.item.name&&(t[s]=this.itemCopy,e&&t.splice(s,1));this.$store.commit("setChecklistWeeklies",t)}if("daily"==this.type){let t=this.$store.getters.checklistDailies;for(let s=0;s<t.length;s++)t[s].name==this.item.name&&(t[s]=this.itemCopy,e&&t.splice(s,1));this.$store.commit("setChecklistDailies",t)}if("adhoc"==this.type){let t=this.$store.getters.checklistAdhocs;for(let s=0;s<t.length;s++)t[s].name==this.item.name&&(t[s]=this.itemCopy,e&&t.splice(s,1));this.$store.commit("setChecklistAdhocs",t)}let t=this.$store.getters.lodestoneData.Character.ID;(0,Q.Cq)(t,this.$store.getters.checklistData)}}},O=s(6262);const U=(0,O.A)(N,[["render",_]]);var M=U,F=s(5240),q={name:"ChecklistView",data(){return{intervalFunction:null,showHidden:!1,weeklyReset:this.formatTimeDiff(this.weeklyResetTime(),!0),dailyReset:this.formatTimeDiff(this.dailyResetTime(),!1),customWeekly:"",customDaily:"",customAdhoc:"",draggedOverName:""}},components:{PageHeader:T.A,ChecklistItem:M},mounted(){this.$nextTick((function(){this.resetDailliesWeeklies()})),this.intervalFunction=setInterval((()=>{this.resetDailliesWeeklies()}),1e3)},unmounted(){clearInterval(this.intervalFunction)},methods:{weeklyResetTime(){let e=new Date,t=new Date;t.setUTCHours(8,0,0),t.setUTCDate(e.getUTCDate()+(9-e.getUTCDay()));let s=t-e,i=6048e5;return s%i+e.getTime()},dailyResetTime(){let e=new Date,t=new Date;t.setUTCHours(15,0,0),t.setUTCDate(t.getUTCDate()+1);let s=t-e,i=864e5;return s%i+e.getTime()},formatTimeDiff(e,t){let s=new Date,i=e-s,o=864e5,a=36e5,r=6e4,l=1e3,n=Math.floor(i/o),h=Math.floor(i/a)-24*Math.floor(i/o),d=Math.floor(i/r)-60*Math.floor(i/a),c=Math.floor(i/l)-60*Math.floor(i/r);return n>0&&t?this.$t("shared.time.daysShort",{days:n})+" "+this.$t("shared.time.hoursShort",{hours:h}):h>0?this.$t("shared.time.hoursShort",{hours:h})+" "+this.$t("shared.time.minutesShort",{minutes:d}):this.$t("shared.time.minutesShort",{minutes:d})+" "+this.$t("shared.time.secondsShort",{seconds:c})},resetDailliesWeeklies(){this.weeklyReset=this.formatTimeDiff(this.weeklyResetTime(),!0),this.dailyReset=this.formatTimeDiff(this.dailyResetTime(),!1);let e=!1;if(this.$store.getters.hasCharacter){if(this.$store.getters.checklistNextWeeklyReset<Date.now()){e=!0,this.$store.commit("checklistNextWeeklyReset",this.weeklyResetTime());let t=this.$store.getters.checklistWeeklies;for(let e=0;e<t.length;e++)t[e].checked=!1}if(this.$store.getters.checklistNextDailyReset<Date.now()){e=!0,this.$store.commit("checklistNextDailyReset",this.dailyResetTime());let t=this.$store.getters.checklistDailies;for(let e=0;e<t.length;e++)t[e].checked=!1}if(e){let e=this.$store.getters.lodestoneData.Character.ID;(0,Q.Cq)(e,this.$store.getters.checklistData)}}},addCustomWeekly(){let e={name:this.customWeekly,custom:!0,checked:!1,hidden:!1},t=[...this.$store.getters.checklistWeeklies];t.push(e),this.$store.commit("setChecklistWeeklies",t),this.customWeekly="";let s=this.$store.getters.lodestoneData.Character.ID;(0,Q.Cq)(s,this.$store.getters.checklistData)},addCustomDaily(){let e={name:this.customDaily,custom:!0,checked:!1,hidden:!1},t=[...this.$store.getters.checklistDailies];t.push(e),this.$store.commit("setChecklistDailies",t),this.customDaily="";let s=this.$store.getters.lodestoneData.Character.ID;(0,Q.Cq)(s,this.$store.getters.checklistData)},addCustomAdhoc(){let e={name:this.customAdhoc,custom:!0,checked:!1,hidden:!1},t=[...this.$store.getters.checklistAdhocs];t.push(e),this.$store.commit("setChecklistAdhocs",t),this.customAdhoc="";let s=this.$store.getters.lodestoneData.Character.ID;(0,Q.Cq)(s,this.$store.getters.checklistData)},startDrag(e,t){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("itemName",t.name)},endDrag(){this.draggedOverName=""},onDrop(e,t){let s=e.dataTransfer.getData("itemName"),i=t.name;if(i==s)return;(0,F.GR)(s,i);let o=this.$store.getters.lodestoneData.Character.ID;(0,Q.Cq)(o,this.$store.getters.checklistData)},onDragOver(e,t){this.draggedOverName=t.name}}};const S=(0,O.A)(q,[["render",L]]);var K=S}}]);
//# sourceMappingURL=checklist.d96103d1.js.map